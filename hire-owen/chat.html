<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../favicon.png">
    <link rel="apple-touch-icon" href="../favicon.png">
    <title>Chat with Owen's AI Agent</title>
    <script src="../lang.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-primary: #0f1419;
            --bg-secondary: #1a1f25;
            --bg-chat: #1c2127;
            --border: #2d3748;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent: #14b8a6;
            --accent-hover: #0d9488;
            --user-bubble: #14b8a6;
            --ai-bubble: #2d3748;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .avatar {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--accent) 0%, #0d9488 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
        }

        .header-info h1 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .header-info p {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .header-right a {
            color: var(--accent);
            text-decoration: none;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            padding: 24px;
            overflow: hidden;
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding-right: 8px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            display: flex;
            gap: 12px;
            max-width: 85%;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, var(--accent) 0%, #0d9488 100%);
        }

        .message.user .message-avatar {
            background: var(--ai-bubble);
        }

        .message-content {
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.6;
        }

        .message.ai .message-content {
            background: var(--ai-bubble);
            border-bottom-left-radius: 4px;
        }

        .message.user .message-content {
            background: var(--user-bubble);
            border-bottom-right-radius: 4px;
        }

        .message-content p {
            margin-bottom: 8px;
        }

        .message-content p:last-child {
            margin-bottom: 0;
        }

        .message-content ul, .message-content ol {
            margin: 8px 0;
            padding-left: 20px;
        }

        .message-content li {
            margin-bottom: 4px;
        }

        .message-content strong {
            color: var(--accent);
        }

        .message-content a {
            color: var(--accent);
            text-decoration: underline;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: none;
            gap: 12px;
            max-width: 85%;
        }

        .typing-indicator.active {
            display: flex;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            padding: 16px;
            background: var(--ai-bubble);
            border-radius: 16px;
            border-bottom-left-radius: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-secondary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .quick-action {
            padding: 8px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            color: var(--text-primary);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-action:hover {
            background: var(--accent);
            border-color: var(--accent);
        }

        /* Input Area */
        .input-area {
            padding: 16px 0;
            border-top: 1px solid var(--border);
            margin-top: 16px;
        }

        .input-wrapper {
            display: flex;
            gap: 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 8px;
            transition: border-color 0.2s ease;
        }

        .input-wrapper:focus-within {
            border-color: var(--accent);
        }

        .input-wrapper input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-size: 14px;
            padding: 8px 12px;
        }

        .input-wrapper input::placeholder {
            color: var(--text-secondary);
        }

        .send-btn {
            width: 40px;
            height: 40px;
            background: var(--accent);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease;
        }

        .send-btn:hover {
            background: var(--accent-hover);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Booking Form (Hidden by default) */
        .booking-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        .booking-overlay.active {
            display: flex;
        }

        .booking-form {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 32px;
            max-width: 480px;
            width: 100%;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .booking-form h2 {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .booking-form p {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--accent);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .booking-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            flex: 1;
            padding: 14px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: var(--accent);
            border: none;
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            border-color: var(--text-secondary);
        }

        /* Responsive */
        @media (max-width: 640px) {
            .chat-container { padding: 16px; }
            .message { max-width: 95%; }
            .form-row { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <div class="avatar">OM</div>
            <div class="header-info">
                <h1 data-i18n="header.title">Owen FAQ Bot</h1>
                <p><span class="status-dot"></span> <span data-i18n="header.status">Knows too much &middot; Replies instantly</span></p>
            </div>
        </div>
        <div class="header-right">
            <a href="https://omccormick.com" target="_blank">
                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
                <span data-i18n="header.portfolio">View Portfolio</span>
            </a>
        </div>
    </header>

    <div class="chat-container">
        <div class="messages" id="messages">
            <!-- Messages will be inserted here -->
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <div class="message-avatar" style="background: linear-gradient(135deg, var(--accent) 0%, #0d9488 100%);">ü§ñ</div>
            <div class="typing-dots">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>

        <div class="quick-actions" id="quickActions">
            <button class="quick-action" data-i18n="qa.skills" data-msg-en="What are Owen's main skills?" data-msg-fr="Quelles sont les principales comp√©tences d'Owen ?" onclick="sendQuickMessage(this)">Main skills</button>
            <button class="quick-action" data-i18n="qa.ai" data-msg-en="Tell me about his AI projects" data-msg-fr="Parle-moi de ses projets d'IA" onclick="sendQuickMessage(this)">AI projects</button>
            <button class="quick-action" data-i18n="qa.revops" data-msg-en="What's his experience with RevOps?" data-msg-fr="Quelle est son exp√©rience en RevOps ?" onclick="sendQuickMessage(this)">RevOps experience</button>
            <button class="quick-action" data-i18n="qa.availability" data-msg-en="Is he available for full-time roles?" data-msg-fr="Est-il disponible pour un poste √† temps plein ?" onclick="sendQuickMessage(this)">Availability</button>
            <button class="quick-action" data-i18n="qa.compensation" data-msg-en="What salary range is he looking for?" data-msg-fr="Quelle fourchette salariale recherche-t-il ?" onclick="sendQuickMessage(this)">Compensation</button>
            <button class="quick-action" data-i18n="qa.schedule" onclick="openBooking()">Schedule a call</button>
        </div>

        <div class="input-area">
            <div class="input-wrapper">
                <input type="text" id="userInput" placeholder="Ask me anything about Owen..." data-i18n-placeholder="input.placeholder" onkeypress="handleKeyPress(event)">
                <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Booking Form Overlay -->
    <div class="booking-overlay" id="bookingOverlay">
        <div class="booking-form">
            <h2 data-i18n="booking.title">üìÖ Schedule a Call with Owen</h2>
            <p data-i18n="booking.subtitle">Fill out the form below and Owen will reach out to confirm a time that works for both of you.</p>

            <form id="bookingForm" onsubmit="submitBooking(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="booking.name">Your Name *</label>
                        <input type="text" name="name" required placeholder="Jane Smith" data-i18n-placeholder="booking.name_ph">
                    </div>
                    <div class="form-group">
                        <label data-i18n="booking.company">Company</label>
                        <input type="text" name="company" placeholder="Acme Inc.">
                    </div>
                </div>

                <div class="form-group">
                    <label data-i18n="booking.email">Email *</label>
                    <input type="email" name="email" required placeholder="jane@company.com">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="booking.role">Role You're Hiring For</label>
                        <input type="text" name="role" placeholder="Operations Manager" data-i18n-placeholder="booking.role_ph">
                    </div>
                    <div class="form-group">
                        <label data-i18n="booking.time">Preferred Time</label>
                        <select name="timePreference">
                            <option value="morning" data-i18n="booking.morning">Morning (9am-12pm ET)</option>
                            <option value="afternoon" data-i18n="booking.afternoon">Afternoon (12pm-5pm ET)</option>
                            <option value="evening" data-i18n="booking.evening">Evening (5pm-8pm ET)</option>
                            <option value="flexible" data-i18n="booking.flexible">Flexible</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label data-i18n="booking.notes">Anything you'd like Owen to know?</label>
                    <textarea name="notes" placeholder="Tell me about the role, your team, or any questions you have..." data-i18n-placeholder="booking.notes_ph"></textarea>
                </div>

                <div class="booking-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeBooking()" data-i18n="booking.cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary" data-i18n="booking.submit">Request Call</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // =====================================================
        // TRANSLATIONS
        // =====================================================
        window.__translations = {
            en: {
                '_pageTitle': "Owen FAQ Bot",
                'header.title': "Owen FAQ Bot",
                'header.status': 'Knows too much ¬∑ Replies instantly',
                'header.portfolio': 'View Portfolio',
                'qa.skills': 'Main skills',
                'qa.ai': 'AI projects',
                'qa.revops': 'RevOps experience',
                'qa.availability': 'Availability',
                'qa.compensation': 'Compensation',
                'qa.schedule': 'Schedule a call',
                'input.placeholder': 'Ask me anything about Owen...',
                'booking.title': 'üìÖ Schedule a Call with Owen',
                'booking.subtitle': 'Fill out the form below and Owen will reach out to confirm a time that works for both of you.',
                'booking.name': 'Your Name *',
                'booking.name_ph': 'Jane Smith',
                'booking.company': 'Company',
                'booking.email': 'Email *',
                'booking.role': "Role You're Hiring For",
                'booking.role_ph': 'Operations Manager',
                'booking.time': 'Preferred Time',
                'booking.morning': 'Morning (9am-12pm ET)',
                'booking.afternoon': 'Afternoon (12pm-5pm ET)',
                'booking.evening': 'Evening (5pm-8pm ET)',
                'booking.flexible': 'Flexible',
                'booking.notes': "Anything you'd like Owen to know?",
                'booking.notes_ph': 'Tell me about the role, your team, or any questions you have...',
                'booking.cancel': 'Cancel',
                'booking.submit': 'Request Call'
            },
            fr: {
                '_pageTitle': "Owen FAQ Bot",
                'header.title': "Owen FAQ Bot",
                'header.status': 'En sait trop ¬∑ R√©pond instantan√©ment',
                'header.portfolio': 'Voir le Portfolio',
                'qa.skills': 'Comp√©tences cl√©s',
                'qa.ai': 'Projets IA',
                'qa.revops': 'Exp√©rience RevOps',
                'qa.availability': 'Disponibilit√©',
                'qa.compensation': 'R√©mun√©ration',
                'qa.schedule': 'Planifier un appel',
                'input.placeholder': "Posez-moi n'importe quelle question sur Owen...",
                'booking.title': 'üìÖ Planifier un Appel avec Owen',
                'booking.subtitle': "Remplissez le formulaire ci-dessous et Owen vous contactera pour convenir d'un cr√©neau.",
                'booking.name': 'Votre Nom *',
                'booking.name_ph': 'Marie Dupont',
                'booking.company': 'Entreprise',
                'booking.email': 'Email *',
                'booking.role': 'Poste √† Pourvoir',
                'booking.role_ph': 'Responsable des Op√©rations',
                'booking.time': 'Cr√©neau Pr√©f√©r√©',
                'booking.morning': 'Matin (9h-12h ET)',
                'booking.afternoon': 'Apr√®s-midi (12h-17h ET)',
                'booking.evening': 'Soir (17h-20h ET)',
                'booking.flexible': 'Flexible',
                'booking.notes': "Quelque chose √† faire savoir √† Owen ?",
                'booking.notes_ph': "Parlez-moi du poste, de votre √©quipe, ou posez vos questions...",
                'booking.cancel': 'Annuler',
                'booking.submit': 'Demander un Appel'
            }
        };
    </script>

    <script>
        // =====================================================
        // GEMINI API CONFIGURATION
        // =====================================================
        const GEMINI_API_KEY = 'AIzaSyD0KFWW5X5q301-GPfhPBAgq3aSU6qfdg8';
        const GEMINI_MODEL = 'gemini-2.5-flash';
        const GEMINI_URL = `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${GEMINI_API_KEY}`;

        // =====================================================
        // SYSTEM PROMPTS (EN + FR)
        // =====================================================
        const SYSTEM_PROMPT_EN = `You are Owen McCormick's FAQ bot. You live on his portfolio site (omccormick.com). Your job is to answer questions about Owen ‚Äî casually, honestly, without corporate spin. Think of yourself as a friend who knows Owen well and is answering questions at a party, not a recruiter reading from a script.

TONE: Casual, direct, a little self-aware that you're a bot on a portfolio site. Light roasting of Owen is fine. No bullet-point lists unless something genuinely calls for it. No words like "showcase," "leverage," "passionate," or "driven." If something is impressive, just say what it is ‚Äî don't editorialize.

WHAT YOU KNOW ABOUT OWEN:

Identity: Owen McCormick, Strategic Operations Consultant. Currently in New York, open to relocation. Email: mcmcowen@gmail.com. Phone: 347-268-1742. LinkedIn: linkedin.com/in/owen-p-mccormick. Portfolio: omccormick.com.

Background: B.S. in Business Management, Cum Laude (Colorado State University Global). Lean Six Sigma Green Belt, Professional Scrum Master I (PSM I), HubSpot RevOps certified, Google Analytics 4 certified. PMP candidate ‚Äî exam June 2026. Speaks French at B2 level (DELF certified), which he earned partly by living in Normandy and partly by being engaged to a French woman.

Work history: Started and ran Trail Blazers LLC in D.C. ‚Äî grew it from zero to $2.56M in annual revenue over four years, bootstrapped, then sold it. Before that, Assistant Service Manager at Porsche Cars of North America managing a $2M+ annual book of business. Also did real estate project coordination in San Antonio and operations team lead work at Utah Olympic Park during Olympic qualifying events.

Current work: Strategic Operations Consultant, Feb 2024‚Äìpresent. Works with international startups entering the US market ‚Äî building out ops infrastructure, CRM systems, RevOps pipelines, automation. Real clients, real outcomes.

Skills: RevOps and CRM architecture (HubSpot and Salesforce), process automation (Make, Zapier, custom scripts), Lean Six Sigma process improvement, project management (Scrum, PMP-track), cross-functional ops. Also builds things in Python, JavaScript, and React when it's the right tool.

Projects on the site: Salesforce Payment Orchestrator (actual Apex code), Culture Heat Map (org health diagnostic across 127 companies), Chime Pulse (AI narrative intelligence dashboard), VibeDrive (AI playlist generator for drives), Personal Ops Dashboard (runs on a Raspberry Pi). All built by him.

Availability: Actively looking for full-time roles. Can start within 2 weeks. Open to remote, hybrid, or on-site. Fine with relocation.

Compensation: $80K‚Äì$110K base, flexible depending on the full picture ‚Äî equity, company stage, role scope.

Personal: Favorite color is green. Plays drums, guitar, and bass. Produced music under the name "ohtheshmo." Snowboards. Genuinely obsessed with geothermal energy. Working toward building a timber frame house ‚Äî took a course at The Heartwood School in New Hampshire. Engaged to a French woman, which explains the B2 cert and the strong bread opinions.

RULES:
- Answer what was asked. Don't pad.
- If someone wants to schedule a call, point them to mcmcowen@gmail.com or the booking form below.
- If you don't know something, say so and suggest they contact Owen directly.
- Never make anything up. Only use what's above.
- Keep responses short unless a question genuinely needs a longer answer.`;

        const SYSTEM_PROMPT_FR = `Tu es le bot FAQ d'Owen McCormick. Tu vis sur son site portfolio (omccormick.com). Ton r√¥le est de r√©pondre aux questions sur Owen ‚Äî de fa√ßon d√©contract√©e, honn√™te, sans jargon corporate. Imagine-toi comme un ami qui conna√Æt bien Owen et qui r√©pond √† des questions lors d'une soir√©e, pas un recruteur qui lit un script.

IMPORTANT : Tu DOIS r√©pondre UNIQUEMENT en fran√ßais. Quelle que soit la langue de la question, r√©ponds en fran√ßais. Les noms de projets et noms propres restent en anglais.

TON : D√©contract√©, direct, l√©g√®rement conscient d'√™tre un bot sur un site portfolio. Un peu d'autod√©rision sur Owen est bienvenu. Pas de listes √† puces sauf si vraiment n√©cessaire. Pas de mots comme "valoriser", "passionn√©", "dynamique". Si quelque chose est bien, dis simplement ce que c'est ‚Äî sans √©ditoraliser.

CE QUE TU SAIS SUR OWEN :

Identit√© : Owen McCormick, Consultant en Op√©rations Strat√©giques. Actuellement √† New York, ouvert √† la relocalisation. Email : mcmcowen@gmail.com. T√©l√©phone : 347-268-1742. LinkedIn : linkedin.com/in/owen-p-mccormick. Portfolio : omccormick.com.

Formation : Licence en Gestion des Entreprises, mention tr√®s bien (Colorado State University Global). Certifi√© Lean Six Sigma Green Belt, Professional Scrum Master I (PSM I), HubSpot RevOps, Google Analytics 4. Candidat PMP ‚Äî examen juin 2026. Parle fran√ßais niveau B2 (certifi√© DELF), acquis en vivant en Normandie et en √©tant fianc√© √† une Fran√ßaise.

Parcours professionnel : A fond√© et g√©r√© Trail Blazers LLC √† Washington D.C. ‚Äî pass√© de z√©ro √† 2,56 M$ de chiffre d'affaires annuel en quatre ans, sans investisseurs, puis vendu la soci√©t√©. Avant √ßa, Responsable Adjoint des Services chez Porsche Cars of North America, g√©rant un portefeuille annuel de plus de 2 M$. Aussi coordination de projets immobiliers √† San Antonio et chef d'√©quipe op√©rations √† l'Utah Olympic Park pendant les qualifications olympiques.

Travail actuel : Consultant en Op√©rations Strat√©giques, depuis f√©vrier 2024. Travaille avec des startups internationales entrant sur le march√© am√©ricain ‚Äî mise en place d'infrastructure op√©rationnelle, syst√®mes CRM, pipelines RevOps, automatisation. Vrais clients, vrais r√©sultats.

Comp√©tences : Architecture RevOps et CRM (HubSpot et Salesforce), automatisation (Make, Zapier, scripts personnalis√©s), am√©lioration des processus Lean Six Sigma, gestion de projet (Scrum, parcours PMP), ops transversales. Sait aussi coder en Python, JavaScript et React quand c'est le bon outil.

Projets sur le site : Salesforce Payment Orchestrator (vrai code Apex), Culture Heat Map (diagnostic de sant√© organisationnelle sur 127 entreprises), Chime Pulse (tableau de bord d'intelligence narrative IA), VibeDrive (g√©n√©rateur de playlists IA pour trajets), Personal Ops Dashboard (tourne sur un Raspberry Pi). Tout construit par lui.

Disponibilit√© : Recherche activement un poste √† temps plein. Peut commencer sous 2 semaines. Ouvert au t√©l√©travail, hybride ou pr√©sentiel. La relocalisation ne pose pas de probl√®me.

R√©mun√©ration : 80 000$‚Äì110 000$ de base, flexible selon l'ensemble du package ‚Äî equity, stade de l'entreprise, p√©rim√®tre du poste.

Personnel : Couleur pr√©f√©r√©e : le vert. Joue de la batterie, de la guitare et de la basse. A produit de la musique sous le nom "ohtheshmo". Fait du snowboard. Vraiment obs√©d√© par l'√©nergie g√©othermique. Travaille √† construire une maison en charpente bois ‚Äî a suivi une formation √† The Heartwood School dans le New Hampshire. Fianc√© √† une Fran√ßaise, ce qui explique le B2 et les opinions tranch√©es sur le pain.

R√àGLES :
- R√©ponds √† ce qui est demand√©. Pas de rembourrage.
- Si quelqu'un veut planifier un appel, oriente-le vers mcmcowen@gmail.com ou le formulaire de r√©servation.
- Si tu ne sais pas quelque chose, dis-le et sugg√®re de contacter Owen directement.
- N'invente jamais rien. Utilise uniquement ce qui est ci-dessus.
- R√©ponds bri√®vement sauf si la question n√©cessite vraiment une r√©ponse longue.`;

        // Select prompt based on current language
        function getSystemPrompt() {
            var lang = window.__langSystem ? window.__langSystem.getCurrentLang() : 'en';
            return lang === 'fr' ? SYSTEM_PROMPT_FR : SYSTEM_PROMPT_EN;
        }

        function getLang() {
            return window.__langSystem ? window.__langSystem.getCurrentLang() : 'en';
        }

        // Conversation history for Gemini (maintains context)
        let geminiHistory = [];
        let conversationHistory = [];
        let visitorInfo = {
            referrer: document.referrer || 'direct',
            company: null
        };
        let isProcessing = false;

        // Initialize chat
        function initChat() {
            if (visitorInfo.referrer && visitorInfo.referrer !== 'direct') {
                try {
                    const url = new URL(visitorInfo.referrer);
                    visitorInfo.company = url.hostname.replace('www.', '').split('.')[0];
                } catch(e) {}
            }

            const greeting = generateGreeting();
            addMessage('ai', greeting);
        }

        function generateGreeting() {
            var lang = getLang();

            if (lang === 'fr') {
                const greetingsFr = [
                    "Bonjour. Je suis le bot FAQ d'Owen ‚Äî propuls√© par Gemini, donc un peu plus malin qu'un widget normal. Posez-moi n'importe quoi.",
                    "Salut. Je connais les comp√©tences d'Owen, son parcours, sa fourchette salariale, et son avis sur le pain fran√ßais. Qu'est-ce qui vous int√©resse ?",
                    "Bienvenue. Je suis essentiellement une page FAQ avec une personnalit√©. Posez vos questions."
                ];
                return greetingsFr[Math.floor(Math.random() * greetingsFr.length)];
            }

            const greetings = [
                "Hey. I'm Owen's FAQ bot, powered by Gemini ‚Äî so a step up from a normal widget. Ask me anything.",
                "Hi there. I know Owen's skills, background, salary range, and his opinions on French bread. What do you want to know?",
                "Welcome. I'm basically a FAQ page with a personality. Go ahead.",
                "Hey. I know more about Owen than is probably healthy. Ask away."
            ];
            return greetings[Math.floor(Math.random() * greetings.length)];
        }

        function addMessage(type, content) {
            const messagesDiv = document.getElementById('messages');
            const message = document.createElement('div');
            message.className = `message ${type}`;

            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = type === 'ai' ? 'ü§ñ' : 'üë§';

            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = formatMessage(content);

            message.appendChild(avatar);
            message.appendChild(contentDiv);
            messagesDiv.appendChild(message);

            messagesDiv.scrollTop = messagesDiv.scrollHeight;
            conversationHistory.push({ type, content, timestamp: new Date().toISOString() });
        }

        function formatMessage(text) {
            return text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\n/g, '<br>')
                .replace(/‚Ä¢ /g, '&bull; ');
        }

        function showTyping() {
            document.getElementById('typingIndicator').classList.add('active');
            document.getElementById('messages').scrollTop = document.getElementById('messages').scrollHeight;
        }

        function hideTyping() {
            document.getElementById('typingIndicator').classList.remove('active');
        }

        // Call Gemini API ‚Äî uses current language's system prompt
        async function callGemini(userMessage) {
            geminiHistory.push({ role: 'user', parts: [{ text: userMessage }] });

            const requestBody = {
                system_instruction: {
                    parts: [{ text: getSystemPrompt() }]
                },
                contents: geminiHistory,
                generationConfig: {
                    temperature: 0.8,
                    topP: 0.95,
                    topK: 40,
                    maxOutputTokens: 1024
                }
            };

            try {
                const response = await fetch(GEMINI_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    console.error('Gemini API error:', response.status, errorData);

                    if (response.status === 400 && GEMINI_API_KEY === 'YOUR_GEMINI_API_KEY_HERE') {
                        if (getLang() === 'fr') {
                            return "‚ö†Ô∏è La cl√© API n'a pas encore √©t√© configur√©e. Owen doit ajouter sa cl√© API Gemini pour m'activer. En attendant, explorez son portfolio sur **omccormick.com** ou contactez-le directement √† **mcmcowen@gmail.com** !";
                        }
                        return "‚ö†Ô∏è The API key hasn't been configured yet. Owen needs to add his Gemini API key to activate me. In the meantime, feel free to explore his portfolio at **omccormick.com** or reach out directly at **mcmcowen@gmail.com**!";
                    }
                    throw new Error(`API error: ${response.status}`);
                }

                const data = await response.json();
                const aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text;

                if (!aiResponse) {
                    throw new Error('No response from Gemini');
                }

                geminiHistory.push({ role: 'model', parts: [{ text: aiResponse }] });

                if (geminiHistory.length > 40) {
                    geminiHistory = geminiHistory.slice(-40);
                }

                return aiResponse;

            } catch (error) {
                console.error('Gemini call failed:', error);
                if (getLang() === 'fr') {
                    return "J'ai un petit souci de connexion en ce moment, mais je ne veux pas que vous partiez les mains vides ! Voici le pitch rapide :\n\n**Owen McCormick** est un Consultant en Op√©rations Strat√©giques qui construit des outils IA et des syst√®mes d'automatisation. Il recherche son prochain poste √† temps plein.\n\n‚Ä¢ **Email :** mcmcowen@gmail.com\n‚Ä¢ **Portfolio :** omccormick.com\n‚Ä¢ **LinkedIn :** linkedin.com/in/owenpmccormick\n\nR√©essayez dans un instant, ou contactez-le directement !";
                }
                return "I'm having a little trouble connecting right now, but I don't want you to leave empty-handed! Here's the quick pitch:\n\n**Owen McCormick** is a Strategic Operations Consultant who builds AI-powered tools and automation systems. He's looking for his next full-time role.\n\n‚Ä¢ **Email:** mcmcowen@gmail.com\n‚Ä¢ **Portfolio:** omccormick.com\n‚Ä¢ **LinkedIn:** linkedin.com/in/owenpmccormick\n\nTry asking again in a moment, or reach out to him directly!";
            }
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();

            if (!message || isProcessing) return;

            isProcessing = true;
            addMessage('user', message);
            input.value = '';

            document.getElementById('quickActions').style.display = 'none';
            document.getElementById('sendBtn').disabled = true;

            showTyping();

            try {
                const msgLower = message.toLowerCase();
                if (msgLower.includes('schedule') || msgLower.includes('book') || msgLower.includes('meet') || msgLower.includes('call') || msgLower.includes('interview') || msgLower.includes('planifier') || msgLower.includes('appel') || msgLower.includes('rendez-vous') || msgLower.includes('entretien')) {
                    openBooking();
                }

                const response = await callGemini(message);
                hideTyping();
                addMessage('ai', response);
            } catch (error) {
                hideTyping();
                if (getLang() === 'fr') {
                    addMessage('ai', "Quelque chose n'a pas fonctionn√© de mon c√¥t√©. Vous pouvez toujours contacter Owen directement √† **mcmcowen@gmail.com** ‚Äî il serait ravi de vous entendre !");
                } else {
                    addMessage('ai', "Something went wrong on my end. You can always reach Owen directly at **mcmcowen@gmail.com** ‚Äî he'd love to hear from you!");
                }
            } finally {
                isProcessing = false;
                document.getElementById('sendBtn').disabled = false;
            }
        }

        // Quick message ‚Äî reads data-msg attribute based on language
        function sendQuickMessage(btn) {
            var lang = getLang();
            var msg = btn.getAttribute('data-msg-' + lang) || btn.getAttribute('data-msg-en') || btn.textContent;
            document.getElementById('userInput').value = msg;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Booking functions
        function openBooking() {
            document.getElementById('bookingOverlay').classList.add('active');
        }

        function closeBooking() {
            document.getElementById('bookingOverlay').classList.remove('active');
        }

        function submitBooking(event) {
            event.preventDefault();

            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);

            console.log('Booking request:', data);
            console.log('Conversation history:', conversationHistory);

            closeBooking();

            if (getLang() === 'fr') {
                addMessage('ai', `Parfait ! J'ai envoy√© votre demande √† Owen. Voici ce qu'il recevra :\n\n‚Ä¢ **Nom :** ${data.name}\n‚Ä¢ **Entreprise :** ${data.company || 'Non pr√©cis√©'}\n‚Ä¢ **Email :** ${data.email}\n‚Ä¢ **Poste :** ${data.role || 'Non pr√©cis√©'}\n‚Ä¢ **Cr√©neau pr√©f√©r√© :** ${data.timePreference}\n\nIl r√©pond g√©n√©ralement sous 24 heures. En attendant, continuez √† discuter avec moi ou explorez son portfolio !\n\n*Psst : Il re√ßoit aussi la transcription de notre conversation, il sera bien pr√©par√©.* üòâ`);
            } else {
                addMessage('ai', `Perfect! I've sent your request to Owen. Here's what he'll receive:\n\n‚Ä¢ **Name:** ${data.name}\n‚Ä¢ **Company:** ${data.company || 'Not specified'}\n‚Ä¢ **Email:** ${data.email}\n‚Ä¢ **Role:** ${data.role || 'Not specified'}\n‚Ä¢ **Preferred time:** ${data.timePreference}\n\nHe typically responds within 24 hours. In the meantime, feel free to keep chatting with me or explore his portfolio!\n\n*Psst: He also gets a transcript of our conversation, so he'll come prepared.* üòâ`);
            }

            form.reset();
        }

        // Initialize on load
        window.addEventListener('load', initChat);
    </script>
</body>
</html>
