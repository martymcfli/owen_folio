<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastermind AI - Neural Audio Mastering Studio</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-primary: #0a0a0c;
            --bg-panel: #121214;
            --bg-module: #1a1a1e;
            --border: #2a2a30;
            --text-primary: #e1e1e6;
            --text-secondary: #6e6e7a;
            --accent: #ff9500;
            --accent-glow: rgba(255, 149, 0, 0.3);
            --cyan: #00d4ff;
            --purple: #9d4edd;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Ambient Background */
        .ambient {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 50% 50%, rgba(255, 149, 0, 0.05), transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        /* Header */
        .header {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            padding: 24px 32px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .header-left {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .neural-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 10px;
            font-family: 'JetBrains Mono', monospace;
            letter-spacing: 0.2em;
            color: var(--accent);
            text-transform: uppercase;
        }

        .neural-dot {
            width: 6px;
            height: 6px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; box-shadow: 0 0 0 0 var(--accent-glow); }
            50% { opacity: 0.8; box-shadow: 0 0 0 8px transparent; }
        }

        .logo {
            font-size: 32px;
            font-weight: 900;
            letter-spacing: -1px;
        }

        .logo span {
            color: var(--accent);
        }

        .logo-sub {
            font-size: 14px;
            font-weight: 300;
            color: var(--text-secondary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .project-info {
            text-align: right;
        }

        .project-label {
            font-size: 10px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .project-name {
            font-size: 14px;
            font-weight: 600;
            max-width: 200px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .back-btn {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 12px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .back-btn:hover {
            border-color: var(--accent);
            color: var(--text-primary);
        }

        /* Main Layout */
        .main {
            position: relative;
            z-index: 10;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 24px;
            padding: 24px 32px;
            min-height: calc(100vh - 120px);
        }

        /* Left Column */
        .left-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Visualizer */
        .visualizer {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 16px;
            height: 320px;
            position: relative;
            overflow: hidden;
        }

        .visualizer canvas {
            width: 100%;
            height: 100%;
        }

        .viz-overlay {
            position: absolute;
            top: 16px;
            left: 16px;
            display: flex;
            gap: 24px;
        }

        .viz-stat {
            display: flex;
            flex-direction: column;
        }

        .viz-stat-label {
            font-size: 9px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .viz-stat-value {
            font-size: 14px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--text-primary);
        }

        .viz-stat-value.accent {
            color: var(--accent);
        }

        .play-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        .play-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .play-btn-large {
            width: 80px;
            height: 80px;
            background: transparent;
            border: none;
            cursor: pointer;
            position: relative;
        }

        .play-btn-large::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--accent);
            filter: blur(30px);
            opacity: 0.3;
        }

        .play-btn-large svg {
            position: relative;
            fill: white;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.5));
        }

        /* Transport */
        .transport {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .timeline {
            width: 100%;
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            cursor: pointer;
            overflow: hidden;
        }

        .timeline-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--cyan));
            border-radius: 4px;
            width: 0%;
            transition: width 0.1s linear;
        }

        .transport-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .transport-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .transport-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: none;
            background: transparent;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .transport-btn:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .transport-btn.playing {
            background: var(--accent);
            color: var(--bg-primary);
        }

        .time-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 18px;
            color: var(--text-secondary);
        }

        .time-display span {
            color: rgba(255, 255, 255, 0.2);
        }

        .ab-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .ab-label {
            font-size: 10px;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .toggle-switch {
            width: 56px;
            height: 28px;
            background: var(--border);
            border-radius: 14px;
            cursor: pointer;
            position: relative;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: var(--accent);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .toggle-switch.active::after {
            transform: translateX(28px);
        }

        /* AI Analysis */
        .ai-analysis {
            background: linear-gradient(135deg, var(--bg-panel), var(--bg-module));
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 28px;
            position: relative;
            overflow: hidden;
        }

        .ai-analysis::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,0.03)' stroke-width='2'%3E%3Crect x='4' y='4' width='16' height='16' rx='2'/%3E%3Cpath d='M9 9h6v6H9z'/%3E%3C/svg%3E") no-repeat;
            background-size: contain;
            opacity: 0.5;
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 16px;
        }

        .ai-icon {
            color: var(--accent);
        }

        .ai-title {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .ai-profile {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
            letter-spacing: -0.5px;
        }

        .ai-description {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .ai-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .ai-tag {
            padding: 6px 14px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
        }

        /* Right Column - Effects Rack */
        .effects-rack {
            display: flex;
            flex-direction: column;
            gap: 16px;
            max-height: calc(100vh - 180px);
            overflow-y: auto;
            padding-right: 8px;
        }

        .effects-rack::-webkit-scrollbar {
            width: 4px;
        }

        .effects-rack::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        .effects-rack::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        /* Module */
        .module {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .module.bypassed {
            opacity: 0.4;
            filter: grayscale(1);
        }

        .module-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .module-icon {
            color: var(--accent);
        }

        .module-title {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Knobs */
        .knobs-row {
            display: flex;
            justify-content: space-around;
            gap: 12px;
        }

        .knob-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .knob {
            width: 56px;
            height: 56px;
            background: linear-gradient(180deg, #2a2a2e, #1a1a1e);
            border: 1px solid rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            position: relative;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5), inset 0 1px 1px rgba(255, 255, 255, 0.1);
        }

        .knob-cap {
            position: absolute;
            inset: 10%;
            background: #222;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.8), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .knob-indicator {
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 3px;
            height: 10px;
            background: var(--accent);
            border-radius: 2px;
            box-shadow: 0 0 5px var(--accent);
        }

        .knob-ring {
            position: absolute;
            inset: 0;
        }

        .knob-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .knob-ring circle {
            fill: none;
            stroke-width: 3;
        }

        .knob-ring .bg {
            stroke: rgba(255, 255, 255, 0.05);
        }

        .knob-ring .value {
            stroke: var(--accent);
            stroke-linecap: round;
        }

        .knob-label {
            font-size: 9px;
            font-weight: 700;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .knob-value {
            font-size: 9px;
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent);
        }

        /* Module Stats */
        .module-stats {
            display: flex;
            justify-content: space-between;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            margin-top: 16px;
        }

        .module-stat {
            text-align: center;
        }

        .module-stat-label {
            font-size: 9px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .module-stat-value {
            font-size: 12px;
            font-family: 'JetBrains Mono', monospace;
        }

        /* Export Buttons */
        .export-section {
            margin-top: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .export-btn {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.2s ease;
        }

        .export-btn.primary {
            background: var(--accent);
            color: var(--bg-primary);
            box-shadow: 0 0 30px var(--accent-glow);
        }

        .export-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 40px var(--accent-glow);
        }

        .export-btn.secondary {
            background: var(--bg-module);
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .export-btn.secondary:hover {
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* Upload Screen */
        .upload-screen {
            position: fixed;
            inset: 0;
            background: var(--bg-primary);
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .upload-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .upload-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .upload-logo {
            font-size: 48px;
            font-weight: 900;
            letter-spacing: -2px;
            margin-bottom: 8px;
        }

        .upload-logo span {
            color: var(--accent);
        }

        .upload-tagline {
            font-size: 16px;
            color: var(--text-secondary);
        }

        .upload-zone {
            width: 500px;
            height: 280px;
            border: 2px dashed var(--border);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .upload-zone:hover {
            border-color: var(--accent);
            background: rgba(255, 149, 0, 0.05);
        }

        .upload-zone.dragover {
            border-color: var(--accent);
            background: rgba(255, 149, 0, 0.1);
            transform: scale(1.02);
        }

        .upload-icon {
            width: 64px;
            height: 64px;
            background: var(--bg-panel);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent);
        }

        .upload-text {
            text-align: center;
        }

        .upload-text h3 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .upload-text p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .upload-text span {
            color: var(--accent);
        }

        .demo-tracks {
            margin-top: 32px;
            text-align: center;
        }

        .demo-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 16px;
        }

        .demo-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .demo-btn {
            padding: 12px 24px;
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .demo-btn:hover {
            border-color: var(--accent);
            background: rgba(255, 149, 0, 0.1);
        }

        /* Loading State */
        .loading-overlay {
            position: fixed;
            inset: 0;
            background: rgba(10, 10, 12, 0.95);
            z-index: 200;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 24px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Responsive */
        @media (max-width: 1000px) {
            .main {
                grid-template-columns: 1fr;
            }
            .effects-rack {
                max-height: none;
            }
        }
    </style>
</head>
<body>
    <div class="ambient"></div>

    <!-- Upload Screen -->
    <div class="upload-screen" id="uploadScreen">
        <div class="upload-header">
            <div class="upload-logo">MASTER<span>MIND</span></div>
            <div class="upload-tagline">AI-Powered Audio Mastering Studio</div>
        </div>

        <div class="upload-zone" id="uploadZone">
            <div class="upload-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="17 8 12 3 7 8"/>
                    <line x1="12" y1="3" x2="12" y2="15"/>
                </svg>
            </div>
            <div class="upload-text">
                <h3>Drop your audio file here</h3>
                <p>or <span>click to browse</span></p>
            </div>
            <input type="file" id="fileInput" accept="audio/*" style="display: none;">
        </div>

        <div class="demo-tracks">
            <div class="demo-label">Or try a demo track</div>
            <div class="demo-buttons">
                <button class="demo-btn" onclick="loadDemo('Electronic', 'Dark Cinematic')">üéπ Electronic</button>
                <button class="demo-btn" onclick="loadDemo('Hip Hop', 'Punchy & Warm')">üé§ Hip Hop</button>
                <button class="demo-btn" onclick="loadDemo('Indie Rock', 'Bright & Open')">üé∏ Indie Rock</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Neural Engine Analyzing...</div>
    </div>

    <!-- Main Studio -->
    <header class="header">
        <div class="header-left">
            <div class="neural-badge">
                <div class="neural-dot"></div>
                Neural Engine Active
            </div>
            <div class="logo">MASTER<span>MIND</span> <span class="logo-sub">ARCHITECT</span></div>
        </div>
        <div class="header-right">
            <div class="project-info">
                <div class="project-label">Project</div>
                <div class="project-name" id="projectName">Demo Track</div>
            </div>
            <a href="../index.html" class="back-btn">‚Üê Portfolio</a>
        </div>
    </header>

    <main class="main">
        <div class="left-column">
            <!-- Visualizer -->
            <div class="visualizer">
                <canvas id="visualizer"></canvas>
                <div class="viz-overlay">
                    <div class="viz-stat">
                        <div class="viz-stat-label">RMS Input</div>
                        <div class="viz-stat-value">-14.2 dB</div>
                    </div>
                    <div class="viz-stat">
                        <div class="viz-stat-label">LUFS Output</div>
                        <div class="viz-stat-value accent">-8.1 LUFS</div>
                    </div>
                </div>
                <div class="play-overlay" id="playOverlay">
                    <button class="play-btn-large" onclick="togglePlay()">
                        <svg width="64" height="64" viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Transport -->
            <div class="transport">
                <div class="timeline" onclick="seekAudio(event)">
                    <div class="timeline-progress" id="timelineProgress"></div>
                </div>
                <div class="transport-controls">
                    <div class="transport-left">
                        <button class="transport-btn" id="playBtn" onclick="togglePlay()">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" id="playIcon">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                        </button>
                        <div class="time-display">
                            <span id="currentTime">0:00</span> <span>/</span> <span id="duration">3:24</span>
                        </div>
                    </div>
                    <div class="ab-toggle">
                        <span class="ab-label">A/B Compare</span>
                        <div class="toggle-switch" id="bypassToggle" onclick="toggleBypass()"></div>
                    </div>
                </div>
            </div>

            <!-- AI Analysis -->
            <div class="ai-analysis">
                <div class="ai-header">
                    <svg class="ai-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                    </svg>
                    <span class="ai-title">Neural Analysis</span>
                </div>
                <div class="ai-profile" id="aiProfile">"Punchy Club Master"</div>
                <p class="ai-description" id="aiDescription">
                    Your track has strong transients and deep sub-bass. The AI detected electronic/EDM characteristics with a BPM around 128.
                    Applied warm analog-style saturation for presence, gentle compression for glue, and precision limiting to hit streaming targets at -8 LUFS.
                </p>
                <div class="ai-tags">
                    <span class="ai-tag">Saturation</span>
                    <span class="ai-tag">Stereo Width</span>
                    <span class="ai-tag">Glue Compression</span>
                    <span class="ai-tag">Brickwall Limiter</span>
                </div>
            </div>
        </div>

        <!-- Effects Rack -->
        <div class="effects-rack">
            <!-- Saturation -->
            <div class="module" id="satModule">
                <div class="module-header">
                    <svg class="module-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                    <span class="module-title">Harmonic Saturation</span>
                </div>
                <div class="knobs-row">
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="75"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(45deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">Drive</span>
                        <span class="knob-value">0.35</span>
                    </div>
                </div>
                <div class="module-stats">
                    <div class="module-stat">
                        <div class="module-stat-label">Circuit</div>
                        <div class="module-stat-value" style="color: var(--accent);">Tape</div>
                    </div>
                    <div class="module-stat">
                        <div class="module-stat-label">Color</div>
                        <div class="module-stat-value">Warm</div>
                    </div>
                </div>
            </div>

            <!-- EQ -->
            <div class="module" id="eqModule">
                <div class="module-header">
                    <svg class="module-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="4" y="4" width="16" height="16" rx="2"/>
                        <path d="M9 9h6v6H9z"/>
                    </svg>
                    <span class="module-title">Parametric EQ</span>
                </div>
                <div class="knobs-row">
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="90"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(30deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">Low</span>
                        <span class="knob-value">+2.1 dB</span>
                    </div>
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="120"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(-15deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">Mid</span>
                        <span class="knob-value">-0.8 dB</span>
                    </div>
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="80"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(60deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">High</span>
                        <span class="knob-value">+1.5 dB</span>
                    </div>
                </div>
            </div>

            <!-- Compressor -->
            <div class="module" id="compModule">
                <div class="module-header">
                    <svg class="module-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                        <path d="M3 9h18"/>
                        <path d="M9 21V9"/>
                    </svg>
                    <span class="module-title">Optical Compressor</span>
                </div>
                <div class="knobs-row">
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="60"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(90deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">Thresh</span>
                        <span class="knob-value">-18 dB</span>
                    </div>
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="100"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(20deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">Ratio</span>
                        <span class="knob-value">3:1</span>
                    </div>
                </div>
                <div class="module-stats">
                    <div class="module-stat">
                        <div class="module-stat-label">Attack</div>
                        <div class="module-stat-value">25ms</div>
                    </div>
                    <div class="module-stat">
                        <div class="module-stat-label">Release</div>
                        <div class="module-stat-value">150ms</div>
                    </div>
                </div>
            </div>

            <!-- Limiter -->
            <div class="module" id="limitModule">
                <div class="module-header">
                    <svg class="module-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                    <span class="module-title">Stereo & Limiter</span>
                </div>
                <div class="knobs-row">
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="85"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(50deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">Width</span>
                        <span class="knob-value">1.15</span>
                    </div>
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="20"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(120deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">Ceiling</span>
                        <span class="knob-value">-0.1 dB</span>
                    </div>
                    <div class="knob-container">
                        <div class="knob">
                            <div class="knob-ring">
                                <svg viewBox="0 0 56 56">
                                    <circle class="bg" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="0"/>
                                    <circle class="value" cx="28" cy="28" r="24" stroke-dasharray="151" stroke-dashoffset="70"/>
                                </svg>
                            </div>
                            <div class="knob-cap" style="transform: rotate(70deg);">
                                <div class="knob-indicator"></div>
                            </div>
                        </div>
                        <span class="knob-label">Output</span>
                        <span class="knob-value">+3.2 dB</span>
                    </div>
                </div>
            </div>

            <!-- Export -->
            <div class="export-section">
                <button class="export-btn primary">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Export Master
                </button>
                <button class="export-btn secondary">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"/>
                        <circle cx="6" cy="12" r="3"/>
                        <circle cx="18" cy="19" r="3"/>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                    </svg>
                    Share with DistroKid
                </button>
            </div>
        </div>
    </main>

    <script>
        // State
        let isPlaying = false;
        let isBypassed = false;
        let currentTime = 0;
        let duration = 204; // 3:24
        let animationId;

        // Demo profiles
        const profiles = {
            'Electronic': {
                name: '"Punchy Club Master"',
                description: 'Your track has strong transients and deep sub-bass. The AI detected electronic/EDM characteristics with a BPM around 128. Applied warm analog-style saturation for presence, gentle compression for glue, and precision limiting to hit streaming targets at -8 LUFS.'
            },
            'Hip Hop': {
                name: '"Warm & Heavy"',
                description: 'Detected hip-hop characteristics with emphasis on low-end punch. The AI applied tube-style saturation for analog warmth, multiband compression to tighten the bass, and stereo widening on the highs for that modern trap sound. Targeting -9 LUFS for maximum impact.'
            },
            'Indie Rock': {
                name: '"Bright & Dynamic"',
                description: 'This indie rock track has great dynamic range and guitar transients. Applied gentle optical compression to preserve dynamics while adding cohesion. High shelf boost for air and presence, with light saturation for analog character. Mastered to -11 LUFS to maintain punch.'
            }
        };

        // Canvas visualizer
        const canvas = document.getElementById('visualizer');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Fake frequency data
        let freqData = new Array(64).fill(0).map(() => Math.random() * 100);

        function drawVisualizer() {
            ctx.fillStyle = 'rgba(18, 18, 20, 0.2)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const barWidth = canvas.width / freqData.length;
            const centerY = canvas.height / 2;

            freqData = freqData.map((val, i) => {
                const target = isPlaying ? 50 + Math.sin(Date.now() / 200 + i * 0.5) * 50 + Math.random() * 30 : 10;
                return val + (target - val) * 0.1;
            });

            freqData.forEach((value, i) => {
                const barHeight = (value / 100) * (canvas.height * 0.8);
                const x = i * barWidth;

                // Color gradient
                const hue = isBypassed ? 0 : 35 + (i / freqData.length) * 20;
                const sat = isBypassed ? 0 : 100;
                const light = isBypassed ? 30 : 50;

                ctx.fillStyle = `hsl(${hue}, ${sat}%, ${light}%)`;
                ctx.fillRect(x, centerY - barHeight / 2, barWidth - 2, barHeight);
            });

            animationId = requestAnimationFrame(drawVisualizer);
        }

        drawVisualizer();

        // Time update
        function updateTime() {
            if (isPlaying) {
                currentTime += 0.1;
                if (currentTime > duration) {
                    currentTime = 0;
                    togglePlay();
                }

                document.getElementById('currentTime').textContent = formatTime(currentTime);
                document.getElementById('timelineProgress').style.width = (currentTime / duration * 100) + '%';
            }
        }

        setInterval(updateTime, 100);

        function formatTime(seconds) {
            const m = Math.floor(seconds / 60);
            const s = Math.floor(seconds % 60);
            return `${m}:${s < 10 ? '0' : ''}${s}`;
        }

        // Controls
        function togglePlay() {
            isPlaying = !isPlaying;
            const btn = document.getElementById('playBtn');
            const icon = document.getElementById('playIcon');
            const overlay = document.getElementById('playOverlay');

            if (isPlaying) {
                btn.classList.add('playing');
                icon.innerHTML = '<path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>';
                overlay.classList.add('hidden');
            } else {
                btn.classList.remove('playing');
                icon.innerHTML = '<path d="M8 5v14l11-7z"/>';
            }
        }

        function toggleBypass() {
            isBypassed = !isBypassed;
            const toggle = document.getElementById('bypassToggle');
            const modules = ['satModule', 'eqModule', 'compModule', 'limitModule'];

            toggle.classList.toggle('active', !isBypassed);

            modules.forEach(id => {
                document.getElementById(id).classList.toggle('bypassed', isBypassed);
            });
        }

        function seekAudio(event) {
            const rect = event.target.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const percent = x / rect.width;
            currentTime = percent * duration;
            document.getElementById('currentTime').textContent = formatTime(currentTime);
            document.getElementById('timelineProgress').style.width = (percent * 100) + '%';
        }

        // Upload handling
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');

        uploadZone.addEventListener('click', () => fileInput.click());

        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file) processFile(file);
        });

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) processFile(file);
        });

        function processFile(file) {
            document.getElementById('projectName').textContent = file.name;
            showLoading();
            setTimeout(() => {
                hideLoading();
                document.getElementById('uploadScreen').classList.add('hidden');
            }, 2000);
        }

        function loadDemo(genre, vibe) {
            document.getElementById('projectName').textContent = `${genre} Demo Track`;
            document.getElementById('aiProfile').textContent = profiles[genre].name;
            document.getElementById('aiDescription').textContent = profiles[genre].description;
            showLoading();
            setTimeout(() => {
                hideLoading();
                document.getElementById('uploadScreen').classList.add('hidden');
            }, 1500);
        }

        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('visible');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('visible');
        }
    </script>
</body>
</html>
